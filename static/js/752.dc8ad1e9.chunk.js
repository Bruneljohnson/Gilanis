"use strict";(self.webpackChunkgilanis=self.webpackChunkgilanis||[]).push([[752],{4752:function(e,n,a){a.r(n),a.d(n,{default:function(){return j}});var r=a(2791),t=a(5861),o=a(885),l=a(7757),s=a.n(l),i="BookTableForm_auth__EKc87",c="BookTableForm_control__vhWyA",u="BookTableForm_actions__hn4xy",d="BookTableForm_order__05GnP",m="BookTableForm_button-orderSuccess__r0g3K",p="BookTableForm_invalid__bR9DY",h=a(6871),f=a(6515),v=a(270),b=a(184),x=function(){var e=(0,h.s0)(),n=(0,r.useState)(!1),a=(0,o.Z)(n,2),l=a[0],x=a[1],j=(0,r.useState)(!1),g=(0,o.Z)(j,2),y=g[0],N=g[1],k=(0,r.useState)(!1),T=(0,o.Z)(k,2),B=T[0],F=T[1],Z=(0,f.Z)(),w=Z.sendRequest,_=Z.error,C=(0,v.Z)((function(e){return""!==e.trim()&&e.trim().includes(" ")})),H=C.value,S=C.error,P=C.isValid,R=C.inputHandler,q=C.blurHandler,D=C.clear,E=(0,v.Z)((function(e){return e.toLowerCase().match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)})),L=E.value,V=E.error,Y=E.isValid,A=E.inputHandler,U=E.blurHandler,I=E.clear,O=(0,v.Z)((function(e){return 11===e.trim().length})),z=O.value,G=O.error,K=O.isValid,W=O.inputHandler,J=O.blurHandler,M=O.clear,$=(0,v.Z)((function(e){return+e.trim()>0&&+e.trim()<11})),Q=$.value,X=$.error,ee=$.isValid,ne=$.inputHandler,ae=$.blurHandler,re=$.clear,te=(0,v.Z)((function(e){return e})),oe=te.value,le=te.error,se=te.isValid,ie=te.inputHandler,ce=te.blurHandler,ue=te.clear,de=(0,v.Z)((function(e){return e})),me=de.value,pe=de.error,he=de.isValid,fe=de.inputHandler,ve=de.blurHandler,be=de.clear;(0,r.useEffect)((function(){F(!!(Y&&P&&K&&ee&&se&&he))}),[Y,P,K,ee,se,he]);var xe=function(){var e=(0,t.Z)(s().mark((function e(n){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),B){e.next=3;break}return e.abrupt("return");case 3:"https://react-tester-9d1b5-default-rtdb.europe-west1.firebasedatabase.app/bookings.json",w({url:"https://react-tester-9d1b5-default-rtdb.europe-west1.firebasedatabase.app/bookings.json",method:"POST",body:{name:H,email:L,mobile:z,groupSize:Q,date:oe,time:me},headers:{"Content-Type":"application/json"}},(function(e){e&&(x(!0),N(!0))})),D(),I(),M(),re(),ue(),be();case 13:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),je=V?"".concat(c," ").concat(p):"".concat(c),ge=S?"".concat(c," ").concat(p):"".concat(c),ye=G?"".concat(c," ").concat(p):"".concat(c),Ne=X?"".concat(c," ").concat(p):"".concat(c),ke=le?"".concat(c," ").concat(p):"".concat(c),Te=pe?"".concat(c," ").concat(p):"".concat(c),Be=navigator.language,Fe=new Intl.DateTimeFormat(Be,{year:"numeric",month:"numeric",day:"numeric"}).format(new Date),Ze=new Intl.DateTimeFormat(Be,{hour:"numeric",minute:"numeric"}).format(new Date);return(0,b.jsx)("section",{className:"app-bg section-padding",children:(0,b.jsxs)("div",{className:i,children:[y&&(0,b.jsxs)("section",{className:d,children:[(0,b.jsx)("p",{style:{color:"var(--color-white)"},className:"p-cormorant",children:"Thank You! Your Booking has been confirmed."}),(0,b.jsx)("button",{onClick:function(){setTimeout((function(){e("/",{replace:!0})}),1e3)},className:"custom-button ".concat(m),style:{fontFamily:"var(--font-alt)"},children:"Close"})]}),!y&&_&&(0,b.jsxs)("div",{className:"flex-center",children:[(0,b.jsx)("div",{children:(0,b.jsx)("p",{className:"p-opensans",children:_.message})}),(0,b.jsx)("div",{children:(0,b.jsx)("button",{type:"button",style:{marginTop:"2rem",fontFamily:"var(--font-alt)",fontWeight:400},className:"custom-button",onClick:function(){return e("/home",{replace:!0})},children:"Retry"})})]}),!y&&!_&&(0,b.jsxs)(r.Fragment,{children:[(0,b.jsx)("h1",{className:"headtext-cormorant",children:"Book A Table"}),(0,b.jsxs)("form",{onSubmit:xe,children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:ge,children:[(0,b.jsx)("label",{htmlFor:"name",children:"Your Name"}),(0,b.jsx)("input",{type:"text",id:"name",value:H,onChange:R,onBlur:q,placeholder:"John Doe",required:!0}),S&&(0,b.jsx)("p",{className:"p-opensans",children:"Please enter your Name"})]}),(0,b.jsxs)("div",{className:je,children:[(0,b.jsx)("label",{htmlFor:"email",children:"Your Email"}),(0,b.jsx)("input",{type:"email",id:"email",value:L,onChange:A,onBlur:U,placeholder:"johndoe@gilanis.com",required:!0}),V&&(0,b.jsx)("p",{className:"p-opensans",children:"Please enter a valid e-mail"})]}),(0,b.jsxs)("div",{className:ye,children:[(0,b.jsx)("label",{htmlFor:"mobile",children:"Your Mobile No."}),(0,b.jsx)("input",{type:"number",id:"mobile",value:z,onChange:W,onBlur:J,minLength:11,maxLength:11,placeholder:"07956958347",required:!0}),G&&(0,b.jsx)("p",{className:"p-opensans",children:"Please enter a valid UK mobile number."})]}),(0,b.jsxs)("div",{className:Ne,children:[(0,b.jsx)("label",{htmlFor:"people",children:"No. of People"}),(0,b.jsx)("input",{type:"number",id:"people",value:Q,onChange:ne,onBlur:ae,min:1,max:10,step:1,placeholder:"1",required:!0}),X&&(0,b.jsx)("p",{className:"p-opensans",children:"Gilani's Restaurant can accomodate 1-10 people per group."})]}),(0,b.jsxs)("div",{className:ke,children:[(0,b.jsx)("label",{htmlFor:"date",children:"Booking Date"}),(0,b.jsx)("input",{type:"date",id:"date",value:oe,onChange:ie,onBlur:ce,min:Fe,max:"2023-01-01",placeholder:Fe,required:!0}),le&&(0,b.jsx)("p",{className:"p-opensans",children:"Sorry, Please choose another date."})]}),(0,b.jsxs)("div",{className:Te,children:[(0,b.jsx)("label",{htmlFor:"time",children:"Booking Date"}),(0,b.jsx)("input",{type:"time",id:"time",value:me,onChange:fe,onBlur:ve,min:"11:00",max:"23:00",placeholder:Ze,required:!0}),pe&&(0,b.jsx)("p",{className:"p-opensans",children:"Our Opening Times are 11am - 11pm Mon-Sun."})]})]}),(0,b.jsxs)("div",{style:{marginBottom:"2rem"},className:u,children:[l&&(0,b.jsx)("button",{children:"Please Wait..."}),!l&&(0,b.jsx)("button",{children:"Book"})]})]})]})]})})},j=function(){return(0,b.jsx)(r.Fragment,{children:(0,b.jsx)(x,{})})}},6515:function(e,n,a){var r=a(5861),t=a(885),o=a(7757),l=a.n(o),s=a(2791),i=function(e){return new Promise((function(n,a){setTimeout((function(){a(new Error("Request Failed! Session Timeout after ".concat(e," seconds")))}),1e3*e)}))};n.Z=function(){var e=(0,s.useState)(!1),n=(0,t.Z)(e,2),a=n[0],o=n[1],c=(0,s.useState)(!1),u=(0,t.Z)(c,2),d=u[0],m=u[1],p=(0,s.useCallback)(function(){var e=(0,r.Z)(l().mark((function e(n,a){var r,t,s,c,u,d,p;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(!0),e.prev=1,t=n.url,s=n.method,c=n.headers,u=n.body,e.next=5,Promise.race([fetch(t,{method:null!==s&&void 0!==s?s:"GET",body:null!==(r=JSON.stringify(u))&&void 0!==r?r:null,headers:null!==c&&void 0!==c?c:{}}),i(10)]);case 5:if((d=e.sent).ok){e.next=8;break}throw new Error("".concat(d.status,"! Sorry, Your request failed to execute."));case 8:return e.next=10,d.json();case 10:p=e.sent,a(p),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),m(e.t0);case 17:o(!1);case 18:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(n,a){return e.apply(this,arguments)}}(),[]);return{isLoading:a,error:d,sendRequest:p}}},270:function(e,n,a){var r=a(885),t=a(2791),o=function(e,n){return"INPUT"===n.type?{value:n.value,isTouched:e.isTouched}:"BLUR"===n.type?{value:e.value,isTouched:!0}:"CLEAR"===n.type?{value:"",isTouched:!1}:void 0};n.Z=function(e){var n=(0,t.useReducer)(o,{value:"",isTouched:!1}),a=(0,r.Z)(n,2),l=a[0],s=a[1],i=e(l.value),c=!i&&l.isTouched;return{value:l.value,isValid:i,error:c,inputHandler:function(e){s({type:"INPUT",value:e.target.value})},blurHandler:function(){s({type:"BLUR"})},clear:function(){s({type:"CLEAR"})}}}}}]);
//# sourceMappingURL=752.dc8ad1e9.chunk.js.map