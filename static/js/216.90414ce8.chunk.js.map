{"version":3,"file":"static/js/216.90414ce8.chunk.js","mappings":"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","sources":["webpack://gilanis/./src/components/Login/AuthForm.module.css?8cd9","components/Login/AuthForm.js","components/Pages/LoginPage.js","hooks/use-Http.js","hooks/use-input.js"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"auth\":\"AuthForm_auth__-TECN\",\"control\":\"AuthForm_control__4A9Is\",\"actions\":\"AuthForm_actions__WXgFv\",\"toggle\":\"AuthForm_toggle__6ngHr\",\"invalid\":\"AuthForm_invalid__DgLz7\",\"eyeIcon\":\"AuthForm_eyeIcon__zW7mP\"};","import classes from \"./AuthForm.module.css\";\nimport React, { useEffect, useRef, useState } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { useNavigate } from \"react-router-dom\";\nimport { AuthSliceActions } from \"../../store/auth-slice/AuthSlice\";\nimport { storeToken } from \"../../store/auth-slice/AuthActionCreators\";\nimport useHttp from \"../../hooks/use-Http\";\nimport useInput from \"../../hooks/use-input\";\nimport { BsEye, BsEyeSlash } from \"react-icons/bs\";\n\nconst AuthForm = () => {\n  const dispatch = useDispatch();\n  const navigate = useNavigate();\n  const PasswordRef = useRef();\n  const [LoginIn, setLoginIn] = useState(true);\n  const [LoggingIn, setLoggingIn] = useState(false);\n  const [passwordVisible, setPasswordVisible] = useState(false);\n  const [formIsValid, setFormIsValid] = useState(false);\n  const { sendRequest, error, finished } = useHttp();\n  const {\n    value: enteredEmail,\n    error: enteredEmailError,\n    isValid: enteredEmailIsValid,\n    inputHandler: emailChangeHandler,\n    blurHandler: emailBlurHandler,\n    clear: emailClear,\n  } = useInput((value) =>\n    value\n      .toLowerCase()\n      .match(\n        /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/\n      )\n  );\n  const {\n    value: enteredPassword,\n    error: enteredPasswordError,\n    isValid: enteredPasswordIsValid,\n    inputHandler: passwordChangeHandler,\n    blurHandler: passwordBlurHandler,\n    clear: passwordClear,\n  } = useInput((value) =>\n    value.match(/(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[^A-Za-z0-9])(?=.{8,})/)\n  );\n\n  const switchAuthModeHandler = () => {\n    setLoginIn((prevState) => !prevState);\n  };\n\n  const toggleVisibilityHandler = () => {\n    setPasswordVisible((prevState) => !prevState);\n    const type =\n      PasswordRef.current.getAttribute(`type`) === \"password\"\n        ? \"text\"\n        : \"password\";\n    PasswordRef.current.setAttribute(`type`, type);\n  };\n\n  useEffect(() => {\n    if (enteredEmailIsValid && enteredPasswordIsValid) {\n      setFormIsValid(true);\n    } else {\n      setFormIsValid(false);\n    }\n  }, [enteredEmailIsValid, enteredPasswordIsValid]);\n\n  const submitHandler = async (event) => {\n    event.preventDefault();\n\n    if (!formIsValid) return;\n\n    const firebaseUrl = LoginIn\n      ? `https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyDvXaGgOIHB37ZcWDqO-6kleELjRMa-3Ns`\n      : `https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=AIzaSyDvXaGgOIHB37ZcWDqO-6kleELjRMa-3Ns\n    `;\n\n    const requestData = {\n      url: firebaseUrl,\n      method: \"POST\",\n      body: {\n        email: enteredEmail,\n        password: enteredPassword,\n        returnSecureToken: true,\n      },\n      headers: { \"Content-Type\": \"application/json\" },\n    };\n\n    const dataGrabber = (data) => {\n      if (LoginIn && data) {\n        setLoggingIn(true);\n\n        const token = data.idToken;\n        const expiryTime = new Date(\n          new Date().getTime() + +data.expiresIn * 1000\n        ).toISOString();\n\n        setTimeout(() => {\n          dispatch(AuthSliceActions.login(token));\n          dispatch(storeToken(token, expiryTime));\n          navigate(`/home`, { replace: true });\n        }, 2000);\n      } else {\n        // navigate(`/home`, { replace: true });\n      }\n    };\n\n    sendRequest(requestData, dataGrabber);\n\n    emailClear();\n    passwordClear();\n  };\n\n  const emailClasses = enteredEmailError\n    ? `${classes.control} ${classes.invalid}`\n    : `${classes.control}`;\n  const passwordClasses = enteredPasswordError\n    ? `${classes.control} ${classes.invalid}`\n    : `${classes.control}`;\n\n  return (\n    <section className=\"app-bg section-padding\">\n      <div className={classes.auth}>\n        {error && (\n          <div className=\"flex-center\">\n            <div>\n              <p className=\"p-opensans\">{error.message}</p>\n            </div>\n            <div>\n              <button\n                type=\"button\"\n                style={{\n                  marginTop: `2rem`,\n                  fontFamily: `var(--font-alt)`,\n                  fontWeight: 400,\n                }}\n                className=\"custom-button\"\n                onClick={() => navigate(`/home`, { replace: true })}\n              >\n                Retry\n              </button>\n            </div>\n          </div>\n        )}\n        {!LoginIn && finished && (\n          <div\n            className=\"flex-center\"\n            style={{ padding: `1rem`, gap: `1.5rem` }}\n          >\n            <div>\n              <p className=\"p-opensans\">\n                You've successfully signed up. <br /> Please Log in.\n              </p>\n            </div>\n            <div>\n              <button\n                type=\"button\"\n                style={{\n                  marginTop: `2rem`,\n                  fontFamily: `var(--font-alt)`,\n                  fontWeight: 400,\n                }}\n                className=\"custom-button\"\n                onClick={() => {\n                  setLoginIn(true);\n                  emailClear();\n                  passwordClear();\n                }}\n              >\n                Login\n              </button>\n            </div>\n          </div>\n        )}\n        {!error && (\n          <React.Fragment>\n            <h1 className=\"headtext-cormorant\">\n              {LoginIn ? \"Login\" : \"Sign Up\"}\n            </h1>\n            <form onSubmit={submitHandler}>\n              <div className={emailClasses}>\n                <label htmlFor=\"email\">Your Email</label>\n                <input\n                  type=\"email\"\n                  id=\"email\"\n                  value={enteredEmail}\n                  onChange={emailChangeHandler}\n                  onBlur={emailBlurHandler}\n                  placeholder=\"johndoe@johndoe.com\"\n                  required\n                />\n                {enteredEmailError && (\n                  <p className=\"p-opensans\">Please enter a valid e-mail</p>\n                )}\n              </div>\n              <div className={passwordClasses}>\n                <label htmlFor=\"password\">Your Password</label>\n                <div style={{ position: \"relative\" }}>\n                  <input\n                    type=\"password\"\n                    id=\"password\"\n                    value={enteredPassword}\n                    onChange={passwordChangeHandler}\n                    onBlur={passwordBlurHandler}\n                    min={8}\n                    placeholder=\"Abcdef5.\"\n                    required\n                    ref={PasswordRef}\n                  />\n                  {passwordVisible && (\n                    <BsEyeSlash\n                      className={classes.eyeIcon}\n                      size={25}\n                      onClick={toggleVisibilityHandler}\n                    />\n                  )}\n                  {!passwordVisible && (\n                    <BsEye\n                      className={classes.eyeIcon}\n                      size={25}\n                      onClick={toggleVisibilityHandler}\n                    />\n                  )}\n                </div>\n                {enteredPasswordError && (\n                  <p className=\"p-opensans\">\n                    Password must contain one uppercase letter, one special\n                    character (,.?!), and is at least eight characters.\n                  </p>\n                )}\n              </div>\n              <div className={classes.actions}>\n                {LoggingIn && <button>Please Wait...</button>}\n                {!LoggingIn && (\n                  <button>{LoginIn ? \"Login\" : \"Create Account\"}</button>\n                )}\n                <button\n                  style={{ marginBottom: `2rem` }}\n                  type=\"button\"\n                  className={classes.toggle}\n                  onClick={switchAuthModeHandler}\n                >\n                  {LoginIn\n                    ? \"Create new account\"\n                    : \"Login with existing account\"}\n                </button>\n              </div>\n            </form>\n          </React.Fragment>\n        )}\n      </div>\n    </section>\n  );\n};\n\nexport default AuthForm;\n","import React from \"react\";\nimport AuthForm from \"../Login/AuthForm\";\n\nconst LoginPage = () => {\n  return (\n    <React.Fragment>\n      <AuthForm />\n    </React.Fragment>\n  );\n};\n\nexport default LoginPage;\n","import { useCallback, useState } from \"react\";\n\nconst TIMEOUT = (sec) => {\n  return new Promise((_, reject) => {\n    setTimeout(() => {\n      reject(new Error(`Request Failed! Session Timeout after ${sec} seconds`));\n    }, sec * 1000);\n  });\n};\n\nconst useHttp = () => {\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState(false);\n  const [finished, setFinished] = useState(false);\n\n  const sendRequest = useCallback(async (requestConfig, dataGrabber) => {\n    setIsLoading(true);\n    try {\n      const { url, method, headers, body } = requestConfig;\n      const response = await Promise.race([\n        fetch(url, {\n          method: method ?? `GET`,\n          body: JSON.stringify(body) ?? null,\n          headers: headers ?? {},\n        }),\n        TIMEOUT(10),\n      ]);\n\n      if (!response.ok)\n        throw new Error(\n          `${response.status}! Sorry, Log In Failed. Have you signed up?`\n        );\n\n      const result = await response.json();\n\n      dataGrabber(result);\n      setFinished(true);\n    } catch (error) {\n      setError(error);\n    }\n    setIsLoading(false);\n  }, []);\n\n  return {\n    isLoading,\n    error,\n    finished,\n    sendRequest,\n  };\n};\n\nexport default useHttp;\n","import { useReducer } from \"react\";\n\nconst inputReducer = (state, action) => {\n  if (action.type === `INPUT`) {\n    return {\n      value: action.value,\n      isTouched: state.isTouched,\n    };\n  }\n\n  if (action.type === `BLUR`) {\n    return {\n      value: state.value,\n      isTouched: true,\n    };\n  }\n\n  if (action.type === `CLEAR`) {\n    return {\n      value: ``,\n      isTouched: false,\n    };\n  }\n};\nconst useInput = (validateInput) => {\n  const [inputState, dispatchInputStateActions] = useReducer(inputReducer, {\n    value: ``,\n    isTouched: false,\n  });\n\n  const isInputValid = validateInput(inputState.value);\n  const hasError = !isInputValid && inputState.isTouched;\n\n  const inputValueChangeHandler = (event) => {\n    dispatchInputStateActions({ type: `INPUT`, value: event.target.value });\n  };\n\n  const inputBlurHandler = () => {\n    dispatchInputStateActions({ type: `BLUR` });\n  };\n\n  const clearInput = () => {\n    dispatchInputStateActions({ type: `CLEAR` });\n  };\n\n  return {\n    value: inputState.value,\n    isValid: isInputValid,\n    error: hasError,\n    inputHandler: inputValueChangeHandler,\n    blurHandler: inputBlurHandler,\n    clear: clearInput,\n  };\n};\n\nexport default useInput;\n"],"names":["dispatch","useDispatch","navigate","useNavigate","PasswordRef","useRef","useState","LoginIn","setLoginIn","LoggingIn","setLoggingIn","passwordVisible","setPasswordVisible","formIsValid","setFormIsValid","useHttp","sendRequest","error","finished","useInput","value","toLowerCase","match","enteredEmail","enteredEmailError","enteredEmailIsValid","isValid","emailChangeHandler","inputHandler","emailBlurHandler","blurHandler","emailClear","clear","enteredPassword","enteredPasswordError","enteredPasswordIsValid","passwordChangeHandler","passwordBlurHandler","passwordClear","toggleVisibilityHandler","prevState","type","current","getAttribute","setAttribute","useEffect","submitHandler","event","preventDefault","url","method","body","email","password","returnSecureToken","headers","data","token","idToken","expiryTime","Date","getTime","expiresIn","toISOString","setTimeout","AuthSliceActions","storeToken","replace","emailClasses","classes","passwordClasses","className","message","style","marginTop","fontFamily","fontWeight","onClick","padding","gap","onSubmit","htmlFor","id","onChange","onBlur","placeholder","required","position","min","ref","size","marginBottom","TIMEOUT","sec","Promise","_","reject","Error","isLoading","setIsLoading","setError","setFinished","useCallback","requestConfig","dataGrabber","race","fetch","JSON","stringify","response","ok","status","json","result","inputReducer","state","action","isTouched","validateInput","useReducer","inputState","dispatchInputStateActions","isInputValid","hasError","target"],"sourceRoot":""}